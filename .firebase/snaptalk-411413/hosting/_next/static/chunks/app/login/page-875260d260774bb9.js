(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4930:function(e,t,n){Promise.resolve().then(n.bind(n,4870))},4870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(7437),o=n(8460),a=n.n(o),r=n(2265),c=n(4033);function l(){let[e,t]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),p=(0,c.useRouter)();async function u(t){t.preventDefault();try{let t=await fetch("https://snap-talk.adaptable.app/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})});if(t.ok){let e=await t.json();localStorage.setItem("token",e.token),localStorage.setItem("id",e.userData._id),p.push("/")}if(403===t.status){let e=await t.json();i(e.info.message)}}catch(e){console.log(e)}}return(0,r.useEffect)(()=>{localStorage.getItem("token")&&(async()=>{try{let e=await fetch("https://snap-talk.adaptable.app/verifyToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})});if(401===e.status){let t=await e.json();console.log(t.error),p.push("/login")}200===e.status&&p.push("/")}catch(e){console.log(e)}})()}),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:a().form,children:[(0,s.jsx)("div",{className:"self-center text-xl font-semibold",children:"Welcome back"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{required:!0,placeholder:"",type:"text",className:a().input,onChange:e=>t(e.target.value)}),(0,s.jsx)("span",{children:"username"})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{required:!0,placeholder:"",type:"password",className:a().input,onChange:e=>o(e.target.value)}),(0,s.jsx)("span",{children:"password"})]}),l&&(0,s.jsx)("div",{className:"text-sm text-[#818181]",children:l}),(0,s.jsxs)("button",{className:a().fancy,onClick:e=>u(e),children:[(0,s.jsx)("span",{className:a()["top-key"]}),(0,s.jsx)("span",{className:a().text,children:"Log in"}),(0,s.jsx)("span",{className:a()["bottom-key-1"]}),(0,s.jsx)("span",{className:a()["bottom-key-2"]})]}),(0,s.jsxs)("div",{className:"self-center text-sm",children:["Don't have an account?"," ",(0,s.jsx)("a",{href:"/signup",className:"underline",children:"Sign up"})]})]})})}},8460:function(e){e.exports={form:"components_form__3qN9n",message:"components_message__GHJrm",flex:"components_flex__ka1su",input:"components_input__4qcDk",input01:"components_input01__SkCds",fancy:"components_fancy__0NMLI",text:"components_text__hh6Ly","top-key":"components_top-key__PvoL6","bottom-key-1":"components_bottom-key-1__EXuIY","bottom-key-2":"components_bottom-key-2__e2VCu"}},622:function(e,t,n){"use strict";var s=n(2265),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,n){var s,a={},i=null,p=null;for(s in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(p=t.ref),t)r.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:o,type:e,key:i,ref:p,props:a,_owner:c.current}}t.Fragment=a,t.jsx=i,t.jsxs=i},7437:function(e,t,n){"use strict";e.exports=n(622)},4033:function(e,t,n){e.exports=n(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=4930)}),_N_E=e.O()}]);